<table class="table table-bordered table-striped table-hover mb-0 align-middle" id="{{ table_id }}" style="font-size: 0.8rem; table-layout: fixed;">
    <thead class="table-light">
        <tr>
            <th scope="col" class="ps-4" style="width: 250px; min-width: 250px; white-space: nowrap;">Asset Class</th>
            {% for at in account_types %}
                <th scope="col" class="text-center" colspan="3">{{ at.label }}</th>
            {% endfor %}
            <th scope="col" class="text-center table-active" colspan="3">Total Portfolio ({% if mode == 'percent' %}%{% else %}${% endif %})</th>
        </tr>
        <tr>
            <th></th>
            {% for at in account_types %}
                <th scope="col" class="text-center small text-muted">Current</th>
                <th scope="col" class="text-center small text-muted">Target</th>
                <th scope="col" class="text-center small text-muted">vTarget</th>
            {% endfor %}
            <th scope="col" class="text-center small table-active text-muted">Current</th>
            <th scope="col" class="text-center small table-active text-muted">Target</th>
            <th scope="col" class="text-center small table-active text-muted">vTarget</th>
        </tr>
    </thead>
    <tbody>
        {% for row in rows %}
        <tr {% if row.is_cash %}class="table-warning fw-bold"{% elif row.is_subtotal %}class="table-info fw-bold"{% elif row.is_group_total %}class="fw-bold" style="background-color: #e2e3e5;"{% elif row.is_grand_total %}class="table-dark fw-bold"{% endif %}>
            <td class="ps-4">{{ row.asset_class_name }}</td>
            {% for at_col in row.account_type_data %}
                <td class="text-end pe-1 small {% if row.is_grand_total %}text-white{% elif row.is_cash or row.is_subtotal or row.is_group_total %}text-dark{% else %}text-muted{% endif %}">{{ at_col.current|safe }}</td>
                <td class="text-end pe-1 small">{{ at_col.target|safe }}</td>
                <td class="text-end pe-1 small fw-bold">{{ at_col.vtarget|safe }}</td>
            {% endfor %}
            <td class="text-end pe-2 table-active {% if row.is_grand_total %}text-white{% elif row.is_cash or row.is_subtotal or row.is_group_total %}text-dark{% else %}text-muted{% endif %}">{{ row.portfolio_current|safe }}</td>
            <td class="text-end pe-2 table-active">{{ row.portfolio_target|safe }}</td>
            <td class="text-end pe-2 table-active fw-bold">{{ row.portfolio_vtarget|safe }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
